<!doctype html>
<html>
<head>
    <title>JavaScript RSA Encryption</title>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="jsencrypt.min.js"></script>
    <script type="text/javascript">

        // Call this code when the page is done loading.
        $(function() {

            $('#reloadkey').click(function(){
                generateKeys();
            });

            // Run a quick encryption/decryption when they click.
            $('#testme').click(function() {
                // Encrypt with the public key...
                var encrypt = new JSEncrypt();
                encrypt.setPublicKey($('#pubkey').val());
                var encrypted = encrypt.encrypt($('#input').val());

                $('#output').val(encrypted);

                // Decrypt with the private key...
                var decrypt = new JSEncrypt();
                decrypt.setPrivateKey($('#privkey').val());
                var uncrypted = decrypt.decrypt(encrypted);

                // Now a simple check to see if the round-trip worked.
                if (uncrypted == $('#input').val()) {
                    alert('It works!!!');
                }
                else {
                    alert('Something went wrong....');
                }
            });

            var generateKeys = function () {
                var keySize = 1024;
                var crypt = new JSEncrypt({default_key_size: keySize});
                crypt.getKey();
                $('#privkey').val(crypt.getPrivateKey());
                $('#pubkey').val(crypt.getPublicKey());
            };
        });
    </script>
</head>

<body>
<label for="privkey">Private Key</label><br/>
<textarea id="privkey" rows="15" cols="65"></textarea><br/>

<label for="pubkey">Public Key</label><br/>
<textarea id="pubkey" rows="15" cols="65"></textarea><br/>

<input id="reloadkey" type="button" value="Reload Keys!!!" /><br/>

<label for="input">Text to encrypt:</label><br/>
<textarea id="input" name="input" type="text" rows=4 cols=70>This is a test!</textarea><br/>

<label for="output">Encrypted text:</label><br/>
<textarea id="output" rows="4" cols="70"></textarea><br/>

<input id="testme" type="button" value="Test Me!!!" /><br/>

</body>
</html>